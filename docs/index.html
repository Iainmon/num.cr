<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.30.1">


<link href="css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="js/doc.js"></script>
<script type="text/javascript">
  CrystalDoc.base_path = "";
</script>

  <meta id="repository-name" content="github.com/crystal-data/bottle">
  <title>README - github.com/crystal-data/bottle</title>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="github.com/crystal-data/bottle/Bottle" data-name="bottle">
      <a href="Bottle.html">Bottle</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/B" data-name="bottle::b">
      <a href="Bottle/B.html">B</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-data/bottle/Bottle/Internal" data-name="bottle::internal">
      <a href="Bottle/Internal.html">Internal</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/ArrayFlags" data-name="bottle::internal::arrayflags">
      <a href="Bottle/Internal/ArrayFlags.html">ArrayFlags</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Assemble" data-name="bottle::internal::assemble">
      <a href="Bottle/Internal/Assemble.html">Assemble</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Binary" data-name="bottle::internal::binary">
      <a href="Bottle/Internal/Binary.html">Binary</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Comparison" data-name="bottle::internal::comparison">
      <a href="Bottle/Internal/Comparison.html">Comparison</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/ContigIter" data-name="bottle::internal::contigiter(t)">
      <a href="Bottle/Internal/ContigIter.html">ContigIter</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype" data-name="bottle::internal::dtype">
      <a href="Bottle/Internal/Dtype.html">Dtype</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/BNum" data-name="bottle::internal::dtype::bnum">
      <a href="Bottle/Internal/Dtype/BNum.html">BNum</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/Double" data-name="bottle::internal::dtype::double">
      <a href="Bottle/Internal/Dtype/Double.html">Double</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/Ftnlen" data-name="bottle::internal::dtype::ftnlen">
      <a href="Bottle/Internal/Dtype/Ftnlen.html">Ftnlen</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/Indexer" data-name="bottle::internal::dtype::indexer">
      <a href="Bottle/Internal/Dtype/Indexer.html">Indexer</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/Integer" data-name="bottle::internal::dtype::integer">
      <a href="Bottle/Internal/Dtype/Integer.html">Integer</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/LFp" data-name="bottle::internal::dtype::lfp">
      <a href="Bottle/Internal/Dtype/LFp.html">LFp</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/Logical" data-name="bottle::internal::dtype::logical">
      <a href="Bottle/Internal/Dtype/Logical.html">Logical</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/Real" data-name="bottle::internal::dtype::real">
      <a href="Bottle/Internal/Dtype/Real.html">Real</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Dtype/UInt" data-name="bottle::internal::dtype::uint">
      <a href="Bottle/Internal/Dtype/UInt.html">UInt</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/crystal-data/bottle/Bottle/Internal/Exceptions" data-name="bottle::internal::exceptions">
      <a href="Bottle/Internal/Exceptions.html">Exceptions</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Exceptions/RangeError" data-name="bottle::internal::exceptions::rangeerror">
      <a href="Bottle/Internal/Exceptions/RangeError.html">RangeError</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Exceptions/ShapeError" data-name="bottle::internal::exceptions::shapeerror">
      <a href="Bottle/Internal/Exceptions/ShapeError.html">ShapeError</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Exceptions/TypeError" data-name="bottle::internal::exceptions::typeerror">
      <a href="Bottle/Internal/Exceptions/TypeError.html">TypeError</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/FlatIter" data-name="bottle::internal::flatiter(t)">
      <a href="Bottle/Internal/FlatIter.html">FlatIter</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Iteration" data-name="bottle::internal::iteration">
      <a href="Bottle/Internal/Iteration.html">Iteration</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/LinAlg" data-name="bottle::internal::linalg">
      <a href="Bottle/Internal/LinAlg.html">LinAlg</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/MatrixIter" data-name="bottle::internal::matrixiter(t)">
      <a href="Bottle/Internal/MatrixIter.html">MatrixIter</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/NDIter" data-name="bottle::internal::nditer(t)">
      <a href="Bottle/Internal/NDIter.html">NDIter</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Numeric" data-name="bottle::internal::numeric">
      <a href="Bottle/Internal/Numeric.html">Numeric</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-data/bottle/Bottle/Internal/SafeNDIter" data-name="bottle::internal::safenditer(t)">
      <a href="Bottle/Internal/SafeNDIter.html">SafeNDIter</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/SafeNDIter/ND" data-name="bottle::internal::safenditer::nd(t)">
      <a href="Bottle/Internal/SafeNDIter/ND.html">ND</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/SafeNDIter/OneD" data-name="bottle::internal::safenditer::oned(t)">
      <a href="Bottle/Internal/SafeNDIter/OneD.html">OneD</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Statistics" data-name="bottle::internal::statistics">
      <a href="Bottle/Internal/Statistics.html">Statistics</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Testing" data-name="bottle::internal::testing">
      <a href="Bottle/Internal/Testing.html">Testing</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-data/bottle/Bottle/Internal/ToString" data-name="bottle::internal::tostring">
      <a href="Bottle/Internal/ToString.html">ToString</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/ToString/TensorPrint" data-name="bottle::internal::tostring::tensorprint(t)">
      <a href="Bottle/Internal/ToString/TensorPrint.html">TensorPrint</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/Trigonometric" data-name="bottle::internal::trigonometric">
      <a href="Bottle/Internal/Trigonometric.html">Trigonometric</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/UFunc" data-name="bottle::internal::ufunc">
      <a href="Bottle/Internal/UFunc.html">UFunc</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/UnsafeIter" data-name="bottle::internal::unsafeiter(t)">
      <a href="Bottle/Internal/UnsafeIter.html">UnsafeIter</a>
      
    </li>
  
  <li class="parent " data-id="github.com/crystal-data/bottle/Bottle/Internal/UnsafeNDIter" data-name="bottle::internal::unsafenditer(t)">
      <a href="Bottle/Internal/UnsafeNDIter.html">UnsafeNDIter</a>
      
        <ul>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/UnsafeNDIter/ND" data-name="bottle::internal::unsafenditer::nd(t)">
      <a href="Bottle/Internal/UnsafeNDIter/ND.html">ND</a>
      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Internal/UnsafeNDIter/OneD" data-name="bottle::internal::unsafenditer::oned(t)">
      <a href="Bottle/Internal/UnsafeNDIter/OneD.html">OneD</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/crystal-data/bottle/Bottle/Tensor" data-name="bottle::tensor(t)">
      <a href="Bottle/Tensor.html">Tensor</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<p><img src="https://raw.githubusercontent.com/crystal-data/bottle/master/static/bottle_logo.png" alt="bottle"/></p>

<p><a href="https://travis-ci.org/crystal-data/bottle" target="_blank"><img src="https://travis-ci.org/crystal-data/bottle.svg?branch=master" alt="Build Status"/></a> <a href="https://gitter.im/crystal-data/bottle?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge" target="_blank"><img src="https://badges.gitter.im/crystal-data/bottle.svg" alt="Join the chat at https://gitter.im/crystal-data/bottle"/></a></p>

<p>Bottle is the core shard needed for scientific computing with Crystal</p>

<ul><li><strong>Website:</strong> https://crystal-data.github.io/bottle</li><li><strong>API Documentation:</strong> https://crystal-data.github.io/bottle/</li><li><strong>Source code:</strong> https://github.com/crystaldata/bottle</li><li><strong>Bug reports:</strong> https://github.com/crystaldata/bottle/issues</li></ul>

<p>It provides:</p>

<ul><li>An n-dimensional <code><a href="Bottle/Tensor.html">Tensor</a></code> data structure</li><li>sophisticated reduction and accumulation routines</li><li>data structures that can easily be passed to C libraries</li><li>powerful linear algebra routines backed by LAPACK and BLAS</li></ul>

<h2>Usage</h2>

<p>Bottle provides data structures that facilitate element-wise operations,
accumulations, and reductions.  While some operations are backed by BLAS
and LaPACK, many vectorized operations use iteration written in Crystal.
The primary goal of this library was to provide a NumPy like interface in
Crystal, and performance will be revisited constantly as the library is
improved.</p>

<p>Include <code><a href="Bottle.html">Bottle</a></code> to add <code><a href="Bottle/Tensor.html">Tensor</a></code> to the top level namespace,
as well as provide access to <code>B</code>, Bottle's public API, which provides many
powerful numerical methods.</p>

<pre><code class="language-crystal"><span class="k">include</span> <span class="t">Bottle</span>

t <span class="o">=</span> <span class="t">Tensor</span>.<span class="k">new</span>([<span class="n">2</span>, <span class="n">2</span>, <span class="n">3</span>]) { <span class="o">|</span>i<span class="o">|</span> i }

<span class="t">B</span>.add(t, t) <span class="c"># =&gt;</span>
<span class="c"># [[[ 0,  2,  4],</span>
<span class="c">#   [ 6,  8, 10]],</span>
<span class="c">#</span>
<span class="c">#  [[12, 14, 16],</span>
<span class="c">#   [18, 20, 22]]]</span></code></pre>

<p>Bottle provides an n-dimensional Tensor for efficient data storage.
Slice and index these containers to return views into their data.</p>

<pre><code class="language-crystal">t[<span class="n">1</span>...] <span class="c"># =&gt;</span>
<span class="c"># [[[ 6,  7,  8],</span>
<span class="c">#   [ 9, 10, 11]]]</span>

t[<span class="n">0</span>] <span class="c"># =&gt;</span>
<span class="c"># [[0, 1, 2],</span>
<span class="c">#  [3, 4, 5]]</span>

t[..., <span class="n">1</span>] <span class="c"># =&gt;</span>
<span class="c"># [[ 3,  4,  5],</span>
<span class="c">#  [ 9, 10, 11]]</span>

t[<span class="n">1</span>..., <span class="n">1</span>...] <span class="c"># =&gt;</span>
<span class="c"># [[[ 9, 10, 11]]]</span></code></pre>

<p>Make use of elementwise, outer, and accumulation operations.</p>

<pre><code class="language-crystal"><span class="t">B</span>.divide(t[<span class="n">0</span>], t[<span class="n">1</span>]) <span class="c"># =&gt;</span>
<span class="c"># [[    0.0,   0.143,    0.25],</span>
<span class="c">#  [  0.333,     0.4,   0.455]]</span>

<span class="t">B</span>.multiply.outer(t[<span class="n">0</span>, <span class="n">0</span>], t[<span class="n">0</span>, <span class="n">1</span>]) <span class="c"># =&gt;</span>
<span class="c"># [[ 0,  0,  0],</span>
<span class="c">#  [ 3,  4,  5],</span>
<span class="c">#  [ 6,  8, 10]]</span></code></pre>

<p>Use Linear Algebra Routines backed by BLAS and LAPACK</p>

<pre><code class="language-crystal"><span class="t">B</span>.dot(t[<span class="n">0</span>, <span class="n">0</span>], t[<span class="n">0</span>, <span class="n">1</span>]) <span class="c"># =&gt; 14.0</span>

<span class="t">B</span>.matmul(t[<span class="n">0</span>, ..., ...<span class="n">2</span>], t[<span class="n">1</span>, ..., ...<span class="n">2</span>]) <span class="c"># =&gt;</span>
<span class="c"># [[   9.0,   10.0],</span>
<span class="c">#  [  54.0,   61.0]]</span>

<span class="t">B</span>.inv(t[<span class="n">0</span>, ..., ...<span class="n">2</span>]) <span class="c"># =&gt;</span>
<span class="c"># [[-1.333, 0.333],</span>
<span class="c">#  [  1.0,   0.0]]</span>

<span class="t">B</span>.norm(t[<span class="n">0</span>, <span class="n">1</span>]) <span class="c"># =&gt; 7.0710678118654755</span></code></pre>

<h2>Contributing</h2>

<p>Bottle requires help in many different ways to continue to grow as a shard.
Contributions such as high level documentation and code quality checks are needed just
as much as API enhancements.  If you are considering larger scale contributions
that extend beyond minor enhancements and bug fixes, contact Crystal Data
in order to be added to the organization to gain access to review and merge
permissions.</p>
</div>
</body>
</html>
